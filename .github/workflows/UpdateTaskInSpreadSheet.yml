name: Update Task via GAS

on:
  pull_request:
    types: [opened, edited, reopened]

jobs:
  update-task:
    runs-on: ubuntu-latest
    steps:
      - name: Extract Task ID
        run: |
          PR_TITLE="${{ github.event.pull_request.title }}"
          TASK_ID=$(echo "$PR_TITLE" | grep -oP '(?<=##)\d+')
          echo "TASK_ID=$TASK_ID" >> $GITHUB_ENV

      - name: Call GAS
        run: |
          curl -X POST "https://script.google.com/macros/s/AKfycbwNsCGP0Rs_jUa-yckCp0muV1mKKTuHf28EjhkkE3NRNyd4uoukabE25X7ZrkoRucwx/exec" \
               -H "Content-Type: application/json" \
               -d "{\"taskId\":\"${TASK_ID}\"}"

